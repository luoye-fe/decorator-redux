/**
 * decorator-redux v1.1.0
 * (c) 2019 luoyefe
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types"),require("react-redux"),require("redux")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-redux","redux"],e):e((t=t||self).DecoratorRedux={},t.react,t["prop-types"],t["react-redux"],t.redux)}(this,function(t,i,u,c,s){"use strict";var p="default"in i?i.default:i;u=u&&u.hasOwnProperty("default")?u.default:u;var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function f(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var d=function(){return(d=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function l(t){return console.log("%c[decorator-redux]","background: #ff5151; color: #fff",""+t)}var h=function(){function t(t){this.state=Object.create(null),this._rawModule=t,this.collectionState([],t)}return t.prototype.getState=function(t){return t.reduce(function(t,e){return t[e]},this.state)},t.prototype.getRawModule=function(t){return t.reduce(function(t,e){return t.modules[e]},this._rawModule)},t.prototype.updateState=function(t,e){return 0===t.length?this.state=e:function t(e,r,n){if(1===r.length)return e[r[0]]=n;t(e[r[0]],r.slice(1),n)}(this.state,t,e)},t.prototype.getPath=function(t){return t.split("/").slice(0,-1)},t.prototype.collectionState=function(r,t){var e,n,o=this;0===r.length?this.state=t.state:this.getState(r.slice(0,-1))[r[r.length-1]]=t.state;t.modules&&(e=t.modules,n=function(t,e){o.collectionState(r.concat(e),t)},Object.keys(e).forEach(function(t){return n(e[t],t)}))},t}();t.RootStoreDecorator=function(t){var e=t.store;return function(r){var a=new h(e),n=s.createStore(function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var n=e[1],o=a.getPath(n.type),i=a.getRawModule(o),u=a.getState(o);if(!i||!n.reducerFuncName)return a.state;if(!i.reducers||!i.reducers[n.reducerFuncName])return l("reducer: "+n.reducerFuncName+" \u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5"),a.state;var c=i.reducers[n.reducerFuncName](u,n.playload);return a.updateState(o,c),d({},a.state)},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.getChildContext=function(){return{dispatch:this.dispatch.bind(this),originStore:n}},e.prototype.dispatch=function(r,t){var n=this,e=r.split("/"),o=e[e.length-1],i=a.getRawModule(a.getPath(r));if(!i.actions||!i.actions[o])return l("action: "+r+" \u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5");i.actions[o]({dispatch:function(t,e){n.props.dispatch({type:r,playload:e,reducerFuncName:t})}},t)},e.prototype.render=function(){return p.createElement(r,{store:{state:this.props.state,dispatch:this.dispatch.bind(this),originStore:n}})},e.childContextTypes={dispatch:u.func,originStore:u.object},e}(i.PureComponent),o=c.connect(function(t){return{state:t}})(t);return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.render=function(){return p.createElement(c.Provider,{store:n},p.createElement(o,null))},e}(i.PureComponent)}},t.ChildStoreDecorator=function(){return function(r){var t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.render=function(){return p.createElement(r,d({store:{state:this.props.state,dispatch:this.context.dispatch.bind(this),originStore:this.context.originStore}},this.props))},e.contextTypes={dispatch:u.func,originStore:u.object},e}(i.PureComponent);return c.connect(function(t){return{state:t}})(t)}},Object.defineProperty(t,"__esModule",{value:!0})});